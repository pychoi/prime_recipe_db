/*! recipe_db_app 2015-11-23 */
myApp.controller("EnterController",["$scope","$http",function(a,b){console.log("EnterController is working!"),a.recipeInfo={},a.recipeId="",a.ingredient={},a.ingredients=[],a.categories=[],a.disable=!1,a.disableInstruction=!1,a.saveStepErrorMessage=!1,a.noStepErrorMessage=!1,a.checkIngredient=!0,a.steps=[{step:1}],a.main=["Beef","Pork","Chicken/Poultry","Lamb/Goat","Seafood","Pasta/Noodle","Tofu","Vegetables","Egg","Rice/Congee"],a.cuisine=["Chinese","American","Italian","Mexican","Japanese","Korean","Indian","Southeast Asian (Thai, Vietnamese, Singaporean, Malaysian)"],a.type=["Bread","Dessert","Dim Sum","Soup","Chinese Festival","BBQ","Herbal Medicine","Salad","Sauces"],a.addName=function(c){b.post("/submit/recipeInfo",a.recipeInfo).then(function(){console.log("Recipe Info saved"),a.disable=!0,a.getId()})},a.getId=function(){b.get("/submit/recipeInfo").then(function(b){console.log(b.data),a.recipeId=b.data[0].id})},a.deleteName=function(){a.disable=!1,a.recipeInfo={},b["delete"]("/submit/recipeInfo").then(function(){console.log("deleted recipe info!")})},a.addIngredient=function(){a.ingredients.push(a.ingredient),b.post("/submit/ingredient",a.ingredient).then(function(b){console.log("Ingredient saved"),a.checkIngredient=!1}),a.ingredient={},a.enterIngredients.$setUntouched()},a.deleteIngredient=function(c){b["delete"]("/submit/ingredient",{params:{name:c.name,amount:c.amount,recipeId:a.recipeId}}).then(function(){for(var b=0;b<a.ingredients.length;b++)c.name==a.ingredients[b].name&&c.amount==a.ingredients[b].amount&&a.ingredients.splice(b,1);a.ingredients.length<1&&(a.checkIngredient=!0)})},a.addNewStep=function(){var b=a.steps.length+1;a.steps.push({step:b})},a.saveStep=function(c){c.length<1?(console.log("empty"),a.noStepErrorMessage=!0):a.noStepErrorMessage=!1;for(var d=0;d<c.length;d++)c[d].instruction?(a.saveStepErrorMessage=!1,b.post("/submit/instruction",c[d]).then(function(){a.disableInstruction=!0,console.log("instruction saved")})):(console.log("missing instruction"),a.saveStepErrorMessage=!0)},a.removeStep=function(b){for(var c=0;c<a.steps.length;c++)b.step==a.steps[c].step&&a.steps.splice(c,1);for(var c=0;c<a.steps.length;c++)a.steps[c].step=c+1},a.deleteSteps=function(){b["delete"]("/submit/instruction",{params:{recipeId:a.recipeId}}).then(function(){a.disableInstruction=!1})},a.toggleChecked=function(b){-1===a.categories.indexOf(b)?a.categories.push(b):a.categories.splice(a.categories.indexOf(b),1)},a.submitRecipe=function(){for(var c=0;c<a.categories.length;c++)b.post("/submit/categories",{name:a.categories[c],recipeId:a.recipeId}).then(function(){a.getThisRecipe()})},a.getThisRecipe=function(){b.get("/submit/recipeData").then(function(a){console.log(a.data)})}}]),myApp.controller("HomeController",["$scope",function(){console.log("HomeController is working!")}]),myApp.controller("ListController",["$scope",function(a){console.log("ListController is working!")}]),myApp.controller("MealController",["$scope",function(a){console.log("MealController is working!")}]),myApp.controller("RecipeController",["$scope",function(a){console.log("RecipeController is working!")}]),myApp.controller("SearchController",["$scope",function(a){a.main=["Beef","Pork","Chicken/Poultry","Lamb/Goat","Seafood","Pasta/Noodle","Tofu","Vegetables","Egg","Rice/Congee"],a.cuisine=["Chinese","American","Italian","Mexican","Japanese","Korean","Indian","Southeast Asian (Thai, Vietnamese, Singaporean, Malaysian)"],a.type=["Bread","Dessert","Dim Sum","Soup","Chinese Festival","BBQ","Herbal Medicine","Salad","Sauces"],a.searchRecipes=function(){location.href="#recipe"}}]);